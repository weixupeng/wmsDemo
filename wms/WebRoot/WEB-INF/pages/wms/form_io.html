<#include "../common/_layout.html"/>
<@layout>
<div class="pageFormContent" layouth="300">
	<h2 class="contentTitle">入库单</h2>
	<form method="post" action="wms/storage/save" class="pageForm" onsubmit="">
	<input type="hidden" id="id" name="id" value="">
	<fieldset>
		<legend>单据信息</legend>
		<dl>
			<dt>入库单号：</dt>
			<dd><input type="text" name="form.optime" value="" class="required textInput"></dd>
		</dl>
		<dl>
			<dt>入库仓库：</dt>
			<dd>
				<select name="form.inStorage" class="required combox">
					<option>---请选择---</option>
					<#list storageList as s>
					<option value="${(s.id)!}">${(s.name)!}</option>
					</#list>
				</select>
			</dd>
		</dl>
		<dl>
			<dt>供应商：</dt>
			<dd>
				<select name="form.customer" class="required combox">
					<option>---请选择---</option>
					<#list customerList as s>
					<option value="${(s.id)!}">${(s.name)!}</option>
					</#list>
				</select>
			</dd>
		</dl>
		<dl>
			<dt>入库时间：</dt>
			<dd><input type="text" name="form.optime" value="" class="required textInput"></dd>
		</dl>
	</fieldset>
	</form>
	<fieldset>
		<legend>单据明细</legend>
		<dl style="width:830px;">
			<dt>货物：</dt>
			<dd style="width:400px;">
				<input type="text" id="materialId" name="formDetail.materialId" value="" class="left required textInput">
				<div class="left buttonActive"><div class="buttonContent"><button type="submit">查询</button></div></div>
				<select name="materials" class="left combox hidden">
					<option>---请选择---</option>
				</select>
				<span class="clear"></span>
			</dd>
		</dl>
		<dl>
			<dt>数量：</dt>
			<dd>
				<input type="text" id="quantity" name="formDetail.quantity" class="required textInput">
				<div class="buttonActive"><div class="buttonContent"><button type="button" onclick="add();">添加</button></div></div>
			</dd>
		</dl>
	</fieldset>
	<table  class="tbfix">
		<thead>
			<tr>
				<th>行项目号</th>
				<th>货物</th>
				<th>数量</th>
			</tr>
		</thead>
		<tbody id="tplWrap"></tbody>
	</table>
</div>
<script id="dataTpl" type="text/template">
	{@each _ as o,index}
	<tr>
	  <td>@{++index}</td>
	  <td>@{o.materialId}【@{o.materialName}】</td>
	  <td>@{o.quantity}</td>
	</tr>
	{@/each}
</script>
<script type="text/javascript">
	var tpl = $('#dataTpl').html();
	var data = [
		{"materialId":"111","materialName":"111","quantity":"1"},
		{"materialId":"222","materialName":"222","quantity":"2"},
		{"materialId":"333","materialName":"333","quantity":"3"}
	];
	var html = juicer(tpl,data);
	$("#tplWrap").html(html);
	function add(){
		data.push({"materialId":"new","materialName":"Name","quantity":"3"});
		var html = juicer(tpl,data);
		$("#tplWrap").html(html);
	}
</script>
</@layout>